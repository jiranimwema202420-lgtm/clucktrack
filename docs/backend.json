{
  "entities": {
    "Flock": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Flock",
      "type": "object",
      "description": "Represents a flock of poultry.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Flock." },
        "breed": { "type": "string", "description": "The breed of the flock." },
        "type": { "type": "string", "enum": ["Broiler", "Layer"], "description": "The type of flock." },
        "count": { "type": "number", "description": "The current number of birds in the flock." },
        "initialCount": { "type": "number", "description": "The initial number of birds when the flock was created." },
        "averageWeight": { "type": "number", "description": "The average weight of a bird in the flock (in kg)." },
        "hatchDate": { "type": "string", "format": "date-time", "description": "The date the flock hatched." },
        "totalFeedConsumed": { "type": "number", "description": "The total amount of feed consumed by the flock (in kg)." },
        "totalCost": { "type": "number", "description": "The total cost associated with the flock." },
        "eggProductionRate": { "type": "number", "description": "The egg production rate for layer flocks (as a percentage)." },
        "totalEggsCollected": { "type": "number", "description": "The total number of eggs collected from the flock." }
      },
      "required": ["id", "breed", "type", "count", "initialCount", "hatchDate"]
    },
    "Sale": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sale",
      "type": "object",
      "description": "Represents a sales transaction.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Sale." },
        "flockId": { "type": "string", "description": "Reference to the Flock from which the sale was made." },
        "saleType": { "type": "string", "enum": ["Birds", "Eggs"], "description": "The type of item sold." },
        "quantity": { "type": "number", "description": "The quantity of items sold." },
        "pricePerUnit": { "type": "number", "description": "The price per unit sold." },
        "total": { "type": "number", "description": "The total amount from the sale." },
        "customer": { "type": "string", "description": "The name of the customer." },
        "saleDate": { "type": "string", "format": "date-time", "description": "The date the sale was made." }
      },
      "required": ["id", "flockId", "saleType", "quantity", "pricePerUnit", "total", "customer", "saleDate"]
    },
    "Expenditure": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Expenditure",
      "type": "object",
      "description": "Represents a farm expenditure.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Expenditure." },
        "category": { "type": "string", "description": "The category of the expenditure." },
        "quantity": { "type": "number", "description": "The quantity of items purchased." },
        "unitPrice": { "type": "number", "description": "The price per unit." },
        "amount": { "type": "number", "description": "The total amount of the expenditure." },
        "description": { "type": "string", "description": "A description of the expenditure." },
        "expenditureDate": { "type": "string", "format": "date-time", "description": "The date of the expenditure." },
        "flockId": { "type": "string", "description": "Optional reference to the Flock this expenditure is for." }
      },
      "required": ["id", "category", "quantity", "unitPrice", "amount", "expenditureDate"]
    },
    "SensorData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SensorData",
      "type": "object",
      "description": "Represents sensor data collected from farm equipment.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the SensorData entity." },
        "timestamp": { "type": "string", "format": "date-time", "description": "The timestamp of the sensor data." },
        "temperature": { "type": "number", "description": "The temperature reading in Celsius." },
        "humidity": { "type": "number", "description": "The humidity reading in percentage." },
        "ammoniaLevel": { "type": "number", "description": "The ammonia level in ppm." }
      },
      "required": ["id", "timestamp", "temperature", "humidity", "ammoniaLevel"]
    },
    "Feed": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Feed",
      "type": "object",
      "description": "Represents a type of feed.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Feed entity." },
        "name": { "type": "string", "description": "The name of the feed." },
        "nutrientComposition": { "type": "string", "description": "The nutrient composition of the feed." },
        "costPerUnit": { "type": "number", "description": "The cost per unit of the feed." }
      },
      "required": ["id", "name", "costPerUnit"]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the system.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the User entity." },
        "displayName": { "type": "string", "description": "The display name of the user." },
        "email": { "type": "string", "format": "email", "description": "The email address of the user." },
        "farmName": { "type": "string", "description": "The name of the user's farm." },
        "farmLocation": { "type": "string", "description": "The location of the user's farm." },
        "farmContact": { "type": "string", "description": "The contact information for the farm." },
        "currency": { "type": "string", "description": "The user's preferred currency." }
      },
      "required": ["id", "email"]
    },
    "Contact": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Contact",
      "type": "object",
      "description": "Represents a supplier or buyer.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Contact." },
        "name": { "type": "string", "description": "The name of the contact or company." },
        "type": { "type": "string", "enum": ["Supplier", "Buyer"], "description": "The type of contact." },
        "contactPerson": { "type": "string", "description": "The primary contact person's name." },
        "email": { "type": "string", "format": "email", "description": "The contact's email address." },
        "phone": { "type": "string", "description": "The contact's phone number." },
        "address": { "type": "string", "description": "The contact's physical address." },
        "products": { "type": "string", "description": "Products they supply or buy (comma-separated)." }
      },
      "required": ["id", "name", "type", "email"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores user profile data. Only the user can read/write their own document."
        }
      },
      {
        "path": "/users/{userId}/flocks/{flockId}",
        "definition": {
          "entityName": "Flock",
          "schema": { "$ref": "#/entities/Flock" },
          "description": "Stores flock data for a user. Only the user can read/write their own flocks."
        }
      },
      {
        "path": "/users/{userId}/sales/{saleId}",
        "definition": {
          "entityName": "Sale",
          "schema": { "$ref": "#/entities/Sale" },
          "description": "Stores sales data for a user. Only the user can read/write their own sales."
        }
      },
      {
        "path": "/users/{userId}/expenditures/{expenditureId}",
        "definition": {
          "entityName": "Expenditure",
          "schema": { "$ref": "#/entities/Expenditure" },
          "description": "Stores expenditure data for a user. Only the user can read/write their own expenditures."
        }
      },
      {
        "path": "/users/{userId}/sensorData/{sensorDataId}",
        "definition": {
          "entityName": "SensorData",
          "schema": { "$ref": "#/entities/SensorData" },
          "description": "Stores sensor data for a user. Only the user can read/write their own sensor data."
        }
      },
      {
        "path": "/users/{userId}/contacts/{contactId}",
        "definition": {
          "entityName": "Contact",
          "schema": { "$ref": "#/entities/Contact" },
          "description": "Stores supplier/buyer contacts for a user. Only the user can read/write their own contacts."
        }
      },
      {
        "path": "/feeds/{feedId}",
        "definition": {
          "entityName": "Feed",
          "schema": { "$ref": "#/entities/Feed" },
          "description": "Stores global feed data. Readable by all authenticated users, writable by admins."
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "AdminRole",
          "schema": {
            "type": "object",
            "properties": {
              "isAdmin": { "type": "boolean" }
            }
          },
          "description": "Marks a user as an admin. The existence of this document grants admin privileges."
        }
      }
    ]
  }
}
